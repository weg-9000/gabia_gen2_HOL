# Lab 06: VPC 및 서브넷 생성

## 목차
- [학습 목표](#학습-목표)
- [왜 이 Lab이 필요한가?](#왜-이-lab이-필요한가)
- [배경 지식](#배경-지식)
- [실습 단계](#실습-단계)
- [심화 이해](#심화-이해)
- [트러블슈팅](#트러블슈팅)
- [다음 단계](#다음-단계)

---

## 학습 목표

이 Lab을 완료하면 다음을 할 수 있습니다:
- VPC(Virtual Private Cloud)의 개념과 필요성을 이해합니다
- CIDR 표기법을 이해하고 서브넷을 설계할 수 있습니다
- 공용/프라이빗 서브넷을 분리하여 보안 아키텍처를 구성합니다
- 라우팅 테이블의 역할과 설정 방법을 이해합니다

**소요 시간**: 20-30분
**난이도**: 중급
**선행 조건**: Lab 01 완료, 기본적인 네트워크 개념 이해

---

## 왜 이 Lab이 필요한가?

### 네트워크 격리의 중요성

#### 전통적인 온프레미스 네트워크
```
물리 네트워크 구성 절차:
1. 네트워크 장비 구매 (라우터, 스위치, 방화벽)
2. 데이터센터에 장비 설치
3. 케이블 포설 및 연결
4. VLAN 설정 및 테스트
5. 방화벽 규칙 설정

소요 시간: 수 주 ~ 수 개월
비용: 수천만 원 이상
유지보수: 전문 인력 필요
```

#### 클라우드 VPC
```
VPC 생성 절차:
1. 콘솔에서 VPC 생성
2. 서브넷 정의
3. 라우팅 테이블 설정
4. 보안 그룹 적용

소요 시간: 5-10분
비용: 무료 (VPC 자체)
유지보수: 콘솔/API로 관리
```

### 실무에서의 VPC 활용 사례

**1. 개발/스테이징/프로덕션 환경 분리**
```
┌──────────────────────────────────────────┐
│              가비아 클라우드              │
│                                          │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ │
│  │ Dev VPC  │ │Stage VPC │ │Prod VPC  │ │
│  │10.0.0/16 │ │10.1.0/16 │ │10.2.0/16 │ │
│  └──────────┘ └──────────┘ └──────────┘ │
│       ↑            ↑            ↑        │
│       └────────────┴────────────┘        │
│              완전 격리됨                  │
└──────────────────────────────────────────┘
```

**2. 멀티 티어 아키텍처**
```
┌────────────────────────────────────┐
│            VPC (10.0.0.0/16)       │
│  ┌────────────────────────────────┐│
│  │ Public Subnet (10.0.1.0/24)   ││
│  │  - 로드밸런서                 ││
│  │  - Bastion Host              ││
│  └────────────────────────────────┘│
│  ┌────────────────────────────────┐│
│  │ Private Subnet (10.0.2.0/24)  ││
│  │  - 웹 서버                    ││
│  │  - 애플리케이션 서버          ││
│  └────────────────────────────────┘│
│  ┌────────────────────────────────┐│
│  │ DB Subnet (10.0.3.0/24)       ││
│  │  - PostgreSQL                 ││
│  │  - Redis                      ││
│  └────────────────────────────────┘│
└────────────────────────────────────┘
```

**3. 보안 규정 준수**
- 금융권: 망분리 요구사항 충족
- 의료: HIPAA 데이터 격리 요구사항
- 정부: 보안 등급별 네트워크 분리

---

## 배경 지식

### 1. VPC(Virtual Private Cloud)란?

VPC는 **클라우드 내에서 논리적으로 격리된 가상 네트워크**입니다.

```
┌────────────────────────────────────────────┐
│          가비아 클라우드 인프라              │
│  ┌─────────────────────────────────────┐   │
│  │        고객 A의 VPC                 │   │
│  │   ┌─────────┐  ┌─────────┐         │   │
│  │   │ Server1 │──│ Server2 │  통신 │   │
│  │   └─────────┘  └─────────┘         │   │
│  └─────────────────────────────────────┘   │
│                    ↕ 격리 (통신 불가 )     │
│  ┌─────────────────────────────────────┐   │
│  │        고객 B의 VPC                 │   │
│  │   ┌─────────┐  ┌─────────┐         │   │
│  │   │ Server1 │──│ Server2 │  통신 │   │
│  │   └─────────┘  └─────────┘         │   │
│  └─────────────────────────────────────┘   │
└────────────────────────────────────────────┘
```

#### VPC의 핵심 특징

| 특징 | 설명 |
|------|------|
| **격리성** | 다른 고객의 네트워크와 완전 분리 |
| **커스터마이징** | IP 범위, 서브넷, 라우팅 직접 설정 |
| **보안** | 보안 그룹, NACL로 트래픽 제어 |
| **확장성** | 필요에 따라 서브넷 추가 가능 |

### 2. IP 주소와 CIDR 표기법

#### IP 주소의 구조
```
192.168.1.100
 │   │   │  │
 │   │   │  └─ 4번째 옥텟 (0-255)
 │   │   └──── 3번째 옥텟 (0-255)
 │   └──────── 2번째 옥텟 (0-255)
 └────────────  1번째 옥텟 (0-255)

이진수: 11000000.10101000.00000001.01100100
        네트워크 부분    │  호스트 부분
```

#### CIDR(Classless Inter-Domain Routing)
```
10.0.0.0/16
│       │
│       └─ 프리픽스 길이 (네트워크 비트 수)
└──────── 네트워크 주소

10.0.0.0/16 의 의미:
- 처음 16비트: 네트워크 (10.0)
- 나머지 16비트: 호스트
- 사용 가능 IP: 10.0.0.0 ~ 10.0.255.255
- 총 IP 개수: 65,536개
```

#### CIDR 계산 쉽게 하기
```
/8  = 256 x 256 x 256 = 16,777,216 IP (A 클래스)
/16 = 256 x 256       = 65,536 IP (B 클래스)
/24 = 256             = 256 IP (C 클래스)
/32 = 1               = 1 IP (단일 호스트)

실무 팁:
- VPC: /16 권장 (65,536 IP 확보)
- 서브넷: /24 권장 (256 IP, 관리 용이)
- 소규모: /28 (16 IP), /27 (32 IP)
```

#### 서브넷 마스크 변환표
| CIDR | 서브넷 마스크 | 사용 가능 IP | 용도 |
|------|--------------|-------------|------|
| /16 | 255.255.0.0 | 65,534 | VPC |
| /20 | 255.255.240.0 | 4,094 | 대규모 서브넷 |
| /24 | 255.255.255.0 | 254 | 일반 서브넷 |
| /28 | 255.255.255.240 | 14 | 소규모 서브넷 |

### 3. 서브넷(Subnet)

서브넷은 **VPC를 더 작은 네트워크로 분할**한 것입니다.

```
VPC: 10.0.0.0/16 (65,536 IP)
├── 서브넷 A: 10.0.1.0/24 (256 IP)
├── 서브넷 B: 10.0.2.0/24 (256 IP)
├── 서브넷 C: 10.0.3.0/24 (256 IP)
└── 미할당: 10.0.4.0/24 ~ 10.0.255.0/24 (확장용)
```

#### 왜 서브넷을 분리하는가?

**1. 보안 강화**
```
┌─────────────────────────────────────┐
│  Public Subnet (10.0.1.0/24)       │
│  - 인터넷에서 접근 가능             │
│  - 로드밸런서, Bastion만 배치       │
└─────────────────────────────────────┘
         │ 제어된 접근만 허용
         ↓
┌─────────────────────────────────────┐
│  Private Subnet (10.0.2.0/24)      │
│  - 인터넷에서 직접 접근 불가         │
│  - 애플리케이션 서버 배치            │
└─────────────────────────────────────┘
         │ 더 엄격한 제어
         ↓
┌─────────────────────────────────────┐
│  Database Subnet (10.0.3.0/24)     │
│  - 가장 엄격한 접근 제어             │
│  - DB 서버만 배치                   │
└─────────────────────────────────────┘
```

**2. 가용성 확보**
```
┌─────────────────────────────────────────┐
│              VPC                        │
│  ┌──────────────┐  ┌──────────────┐    │
│  │   Zone A     │  │   Zone B     │    │
│  │  10.0.1.0/24 │  │  10.0.3.0/24 │    │
│  │    Web 1     │  │    Web 2     │    │
│  └──────────────┘  └──────────────┘    │
│         │                  │            │
│         └────────┬─────────┘            │
│                  │                      │
│           Load Balancer                 │
│                  │                      │
│              Internet                   │
└─────────────────────────────────────────┘

Zone A 장애 → Zone B에서 서비스 계속
```

**3. 트래픽 관리**
```
서브넷별 라우팅:
- Public: 0.0.0.0/0 → Internet Gateway
- Private: 0.0.0.0/0 → NAT Gateway
- Database: 외부 라우팅 없음
```

### 4. 라우팅 테이블

라우팅 테이블은 **네트워크 트래픽의 경로를 결정**합니다.

```
┌────────────────────────────────────────────┐
│           라우팅 테이블 (Public)            │
├──────────────────┬─────────────────────────┤
│   목적지         │   대상                   │
├──────────────────┼─────────────────────────┤
│   10.0.0.0/16    │   Local (VPC 내부)      │
│   0.0.0.0/0      │   Internet Gateway      │
└──────────────────┴─────────────────────────┘

┌────────────────────────────────────────────┐
│           라우팅 테이블 (Private)           │
├──────────────────┬─────────────────────────┤
│   목적지         │   대상                   │
├──────────────────┼─────────────────────────┤
│   10.0.0.0/16    │   Local (VPC 내부)      │
│   0.0.0.0/0      │   NAT Gateway           │
└──────────────────┴─────────────────────────┘
```

#### 라우팅 동작 원리
```
패킷: 10.0.2.10 → 8.8.8.8 (Google DNS)

1. 라우팅 테이블 확인
2. 10.0.0.0/16 매칭? NO
3. 0.0.0.0/0 매칭? YES
4. NAT Gateway로 전송
5. NAT Gateway → Internet Gateway → 인터넷
```

### 5. 프라이빗 IP 대역

RFC 1918에서 정의한 **프라이빗 IP 대역**:

| 클래스 | IP 대역 | CIDR | 사용 가능 IP |
|--------|--------|------|-------------|
| A | 10.0.0.0 - 10.255.255.255 | 10.0.0.0/8 | 16,777,216 |
| B | 172.16.0.0 - 172.31.255.255 | 172.16.0.0/12 | 1,048,576 |
| C | 192.168.0.0 - 192.168.255.255 | 192.168.0.0/16 | 65,536 |

**왜 10.0.0.0/16을 사용하는가?**
- 충분한 IP 공간 (65,536개)
- 온프레미스 네트워크와 충돌 방지 (보통 192.168.x.x 사용)
- VPC Peering 시 중복 방지 용이

---

## 실습 단계

### 사전 준비

```bash
# 필요 조건
가비아 클라우드 계정
Lab 01에서 생성한 서버
콘솔 접속 가능
```

### 1단계: 네트워크 설계

실습 전 네트워크 구조를 먼저 설계합니다.

#### 쇼핑몰 아키텍처 네트워크 설계
```
┌──────────────────────────────────────────────────┐
│        shop-vpc (10.0.0.0/16)                    │
│                                                  │
│  ┌───────────────────────────────────────────┐  │
│  │     Public Subnet (10.0.1.0/24)           │  │
│  │     - 로드밸런서                          │  │
│  │     - Bastion Host (SSH 접속용)           │  │
│  │     - NAT Gateway                         │  │
│  └───────────────────────────────────────────┘  │
│                      │                           │
│                      ↓                           │
│  ┌───────────────────────────────────────────┐  │
│  │     Private Subnet (10.0.2.0/24)          │  │
│  │     - Web Server (FastAPI)                │  │
│  │     - Application Server                  │  │
│  └───────────────────────────────────────────┘  │
│                      │                           │
│                      ↓                           │
│  ┌───────────────────────────────────────────┐  │
│  │     Database Subnet (10.0.3.0/24)         │  │
│  │     - PostgreSQL                          │  │
│  │     - Redis (향후 확장)                   │  │
│  └───────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

#### IP 할당 계획
| 서브넷 | CIDR | 사용 가능 IP | 용도 |
|--------|------|-------------|------|
| Public | 10.0.1.0/24 | 10.0.1.1 ~ 10.0.1.254 | 외부 접근 리소스 |
| Private | 10.0.2.0/24 | 10.0.2.1 ~ 10.0.2.254 | 애플리케이션 |
| Database | 10.0.3.0/24 | 10.0.3.1 ~ 10.0.3.254 | 데이터베이스 |
| 예비 | 10.0.4.0/24 ~ | - | 향후 확장용 |

### 2단계: VPC 생성

#### 콘솔에서 VPC 생성

1. **가비아 클라우드 콘솔 로그인**
   - https://console.gabia.com 접속
   - 계정 로그인

2. **VPC 메뉴 이동**
   ```
   콘솔 → 네트워크 → VPC
   ```

3. **VPC 생성 클릭**
   ```
   + VPC 생성 버튼 클릭
   ```

4. **VPC 정보 입력**
   ```
   이름: shop-vpc
   CIDR 블록: 10.0.0.0/16
   설명: 쇼핑몰 서비스용 VPC
   ```

5. **생성 확인**
   ```
   VPC ID: vpc-xxxxxxxx
   상태: Available
   CIDR: 10.0.0.0/16
   ```

#### VPC 생성 확인
```
┌─────────────────────────────────────────┐
│  VPC 목록                               │
├─────────────────────────────────────────┤
│  이름        CIDR          상태         │
│  shop-vpc   10.0.0.0/16   Available    │
└─────────────────────────────────────────┘
```

### 3단계: 서브넷 생성

#### 3.1 Public 서브넷 생성

1. **서브넷 메뉴 이동**
   ```
   콘솔 → 네트워크 → VPC → 서브넷
   ```

2. **서브넷 생성**
   ```
   이름: shop-public-subnet
   VPC: shop-vpc (10.0.0.0/16)
   가용 영역: 가산A (또는 원하는 존)
   CIDR 블록: 10.0.1.0/24
   타입: Public
   ```

#### 3.2 Private 서브넷 생성

```
이름: shop-private-subnet
VPC: shop-vpc (10.0.0.0/16)
가용 영역: 가산A
CIDR 블록: 10.0.2.0/24
타입: Private
```

#### 3.3 Database 서브넷 생성

```
이름: shop-db-subnet
VPC: shop-vpc (10.0.0.0/16)
가용 영역: 가산A
CIDR 블록: 10.0.3.0/24
타입: Private
```

#### 서브넷 생성 확인
```
┌──────────────────────────────────────────────────────────┐
│  서브넷 목록                                              │
├──────────────────────────────────────────────────────────┤
│  이름                  CIDR           타입    가용영역    │
│  shop-public-subnet   10.0.1.0/24   Public   가산A      │
│  shop-private-subnet  10.0.2.0/24   Private  가산A      │
│  shop-db-subnet       10.0.3.0/24   Private  가산A      │
└──────────────────────────────────────────────────────────┘
```

### 4단계: 인터넷 게이트웨이 연결

#### 인터넷 게이트웨이 생성

1. **인터넷 게이트웨이 메뉴**
   ```
   콘솔 → 네트워크 → VPC → 인터넷 게이트웨이
   ```

2. **생성**
   ```
   이름: shop-igw
   VPC: shop-vpc
   ```

3. **VPC에 연결**
   ```
   인터넷 게이트웨이 선택 → VPC 연결 → shop-vpc 선택
   ```

### 5단계: 라우팅 테이블 설정

#### 5.1 Public 라우팅 테이블

1. **라우팅 테이블 메뉴**
   ```
   콘솔 → 네트워크 → VPC → 라우팅 테이블
   ```

2. **Public 라우팅 테이블 생성**
   ```
   이름: shop-public-rt
   VPC: shop-vpc
   ```

3. **라우팅 규칙 추가**
   ```
   ┌─────────────────────────────────────────┐
   │  라우팅 테이블: shop-public-rt          │
   ├────────────────┬────────────────────────┤
   │   목적지       │   대상                 │
   ├────────────────┼────────────────────────┤
   │   10.0.0.0/16  │   Local               │
   │   0.0.0.0/0    │   shop-igw            │
   └────────────────┴────────────────────────┘
   ```

4. **서브넷 연결**
   ```
   shop-public-subnet을 shop-public-rt에 연결
   ```

#### 5.2 Private 라우팅 테이블

```
이름: shop-private-rt
VPC: shop-vpc

라우팅 규칙:
┌────────────────┬────────────────────────┐
│   목적지       │   대상                 │
├────────────────┼────────────────────────┤
│   10.0.0.0/16  │   Local               │
└────────────────┴────────────────────────┘

서브넷 연결: shop-private-subnet, shop-db-subnet
```

> **참고**: Private 서브넷의 인터넷 접근은 Lab 07 (NAT Gateway)에서 설정합니다.

### 6단계: 서버를 VPC로 이동 (선택)

#### 기존 서버가 있는 경우

Lab 01에서 생성한 서버를 새 VPC의 서브넷으로 이동합니다.

```
주의: 서버 이동은 중단이 발생할 수 있습니다.
권장: 새 VPC에 새 서버를 생성하고 이미지로 복원
```

#### 새 서버 생성 (권장)

1. **Lab 01에서 생성한 이미지 사용** (Lab 02 완료 시)
   ```
   콘솔 → 컴퓨트 → 서버 → 서버 생성
   이미지: shop-server-image (Lab 02에서 생성)
   VPC: shop-vpc
   서브넷: shop-private-subnet
   ```

2. **또는 새로 설정**
   ```
   콘솔 → 컴퓨트 → 서버 → 서버 생성
   이미지: Ubuntu 22.04 LTS
   VPC: shop-vpc
   서브넷: shop-private-subnet
   ```

### 7단계: 네트워크 연결 테스트

#### 같은 VPC 내 통신 테스트

```bash
# Public 서브넷 서버에서 Private 서브넷 서버로 ping
ssh -i ~/.ssh/gabia-key.pem ubuntu@[public-server-ip]

# Private 서브넷 서버의 사설 IP로 ping
ping 10.0.2.10

# 결과: 성공
PING 10.0.2.10 (10.0.2.10) 56(84) bytes of data.
64 bytes from 10.0.2.10: icmp_seq=1 ttl=64 time=0.5 ms
```

#### 인터넷 연결 테스트 (Public 서브넷)

```bash
# Public 서브넷 서버에서
curl -I https://www.google.com

# 결과: 200 OK (성공)
HTTP/2 200
```

#### 인터넷 연결 테스트 (Private 서브넷)

```bash
# Private 서브넷 서버에서
curl -I https://www.google.com

# 결과: 실패 (NAT Gateway 없음)
# Lab 07에서 NAT Gateway 설정 후 가능
```

---

## 심화 이해

### 1. VPC 설계 모범 사례

#### IP 대역 선택 기준
```
권장하지 않는 대역:
- 192.168.0.0/16: 가정/사무실 공유기에서 흔히 사용
- 172.17.0.0/16: Docker 기본 네트워크

권장 대역:
- 10.0.0.0/16: 일반적인 VPC
- 10.100.0.0/16: 개발 환경
- 10.200.0.0/16: 스테이징 환경
```

#### 서브넷 크기 결정
```
소규모 (스타트업):
- VPC: /16
- 서브넷: /24 (256 IP, 3-5개)

중규모 (중소기업):
- VPC: /16
- 서브넷: /24 (256 IP, 10-20개)

대규모 (엔터프라이즈):
- VPC: /16 여러 개
- 서브넷: /20 (4096 IP) ~ /24
```

### 2. 멀티 AZ 설계

고가용성을 위한 가용 영역 분산:

```
┌──────────────────────────────────────────────────┐
│                  shop-vpc                        │
│                                                  │
│   ┌──────────────────┐  ┌──────────────────┐   │
│   │     Zone A       │  │     Zone B       │   │
│   │                  │  │                  │   │
│   │  Public-A        │  │  Public-B        │   │
│   │  10.0.1.0/24     │  │  10.0.4.0/24     │   │
│   │  ┌────────────┐  │  │  ┌────────────┐  │   │
│   │  │    LB-A    │  │  │  │    LB-B    │  │   │
│   │  └────────────┘  │  │  └────────────┘  │   │
│   │                  │  │                  │   │
│   │  Private-A       │  │  Private-B       │   │
│   │  10.0.2.0/24     │  │  10.0.5.0/24     │   │
│   │  ┌────────────┐  │  │  ┌────────────┐  │   │
│   │  │   Web-A    │  │  │  │   Web-B    │  │   │
│   │  └────────────┘  │  │  └────────────┘  │   │
│   │                  │  │                  │   │
│   │  DB-A            │  │  DB-B            │   │
│   │  10.0.3.0/24     │  │  10.0.6.0/24     │   │
│   │  ┌────────────┐  │  │  ┌────────────┐  │   │
│   │  │ Primary DB │◄─┼──┼─►│ Standby DB │  │   │
│   │  └────────────┘  │  │  └────────────┘  │   │
│   └──────────────────┘  └──────────────────┘   │
└──────────────────────────────────────────────────┘
```

### 3. CIDR 겹침 방지

#### VPC Peering 시 주의점
```
잘못된 예:
VPC-A: 10.0.0.0/16
VPC-B: 10.0.0.0/16  ← CIDR 중복! Peering 불가

올바른 예:
VPC-A: 10.0.0.0/16
VPC-B: 10.1.0.0/16  ← CIDR 고유, Peering 가능
```

### 4. 보안 계층화

```
┌────────────────────────────────────────────────┐
│                    Internet                    │
└────────────────────────────────────────────────┘
                       │
                       ↓
┌────────────────────────────────────────────────┐
│  Layer 1: 인터넷 게이트웨이                     │
│  - 공인 IP 있는 리소스만 접근 가능              │
└────────────────────────────────────────────────┘
                       │
                       ↓
┌────────────────────────────────────────────────┐
│  Layer 2: 보안 그룹 (Lab 09)                   │
│  - Stateful 방화벽                             │
│  - 인스턴스 레벨                               │
└────────────────────────────────────────────────┘
                       │
                       ↓
┌────────────────────────────────────────────────┐
│  Layer 3: NACL (Network ACL)                   │
│  - Stateless 방화벽                            │
│  - 서브넷 레벨                                  │
└────────────────────────────────────────────────┘
                       │
                       ↓
┌────────────────────────────────────────────────┐
│  Layer 4: OS 방화벽                            │
│  - iptables, ufw                               │
│  - 인스턴스 내부                               │
└────────────────────────────────────────────────┘
```

---

## 트러블슈팅

### 문제 1: 서브넷 생성 실패

**증상**
```
오류: CIDR 블록이 VPC 범위를 벗어났습니다.
```

**원인**
- 서브넷 CIDR이 VPC CIDR에 포함되지 않음

**해결**
```
VPC CIDR: 10.0.0.0/16
서브넷 CIDR은 반드시 10.0.x.x 범위 내에서 설정

10.0.1.0/24 → VPC 범위 내
10.1.0.0/24 → VPC 범위 외
```

### 문제 2: 같은 VPC 내 서버 간 통신 실패

**증상**
```bash
ping 10.0.2.10
# 응답 없음
```

**확인 순서**

1. **보안 그룹 확인**
   ```
   인바운드 규칙에 ICMP (ping) 허용되어 있는지 확인
   ```

2. **라우팅 테이블 확인**
   ```
   10.0.0.0/16 → Local 규칙 존재하는지 확인
   ```

3. **서브넷 연결 확인**
   ```
   서버가 올바른 서브넷에 배치되어 있는지 확인
   ```

4. **NACL 확인**
   ```
   서브넷의 NACL에서 트래픽 차단하고 있는지 확인
   ```

### 문제 3: 인터넷 연결 안 됨 (Public 서브넷)

**증상**
```bash
curl https://www.google.com
# 타임아웃
```

**확인 순서**

1. **공인 IP 확인**
   ```
   서버에 공인 IP가 할당되어 있는지 확인
   ```

2. **인터넷 게이트웨이 확인**
   ```
   VPC에 인터넷 게이트웨이가 연결되어 있는지 확인
   ```

3. **라우팅 테이블 확인**
   ```
   0.0.0.0/0 → Internet Gateway 규칙 존재하는지 확인
   ```

4. **보안 그룹 확인**
   ```
   아웃바운드 규칙에 인터넷 접근 허용되어 있는지 확인
   ```

### 문제 4: CIDR 중복 오류

**증상**
```
오류: 서브넷 CIDR이 기존 서브넷과 중복됩니다.
```

**해결**
```bash
# 기존 서브넷 CIDR 확인
콘솔 → VPC → 서브넷 → 기존 서브넷 CIDR 확인

# 중복되지 않는 CIDR 선택
기존: 10.0.1.0/24, 10.0.2.0/24
신규: 10.0.3.0/24 (중복 없음)
```

### 문제 5: 서버 생성 시 VPC 선택 불가

**증상**
```
서버 생성 화면에서 VPC 목록이 비어 있음
```

**원인 및 해결**
1. VPC 상태가 Available인지 확인
2. VPC에 서브넷이 생성되어 있는지 확인
3. 리전/가용 영역이 올바른지 확인

---

## 다음 단계

### Lab 07: NAT Gateway
Private 서브넷의 서버가 인터넷에 접속할 수 있도록 NAT Gateway를 구성합니다.

### Lab 08: 공인 IP (EIP)
탄력적 IP를 할당하고 관리하는 방법을 학습합니다.

### Lab 09: 보안 그룹
네트워크 방화벽을 설정하여 트래픽을 제어합니다.

### 실습 완료 체크리스트

```
VPC 생성 완료 (10.0.0.0/16)
Public 서브넷 생성 (10.0.1.0/24)
Private 서브넷 생성 (10.0.2.0/24)
Database 서브넷 생성 (10.0.3.0/24)
인터넷 게이트웨이 생성 및 연결
Public 라우팅 테이블 설정
Private 라우팅 테이블 설정
네트워크 통신 테스트 완료
```

---

## 참고 자료

### 가비아 클라우드 공식 문서
- [VPC 개요](https://customer.gabia.com/manual/cloud/21025)
- [서브넷 가이드](https://customer.gabia.com/manual/cloud/21025/21340)
- [라우팅 테이블 설정](https://customer.gabia.com/manual/cloud/22632)

### 추가 학습 자료
- [CIDR 계산기](https://www.ipaddressguide.com/cidr)
- [AWS VPC 설계 모범 사례](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ug.pdf) (참고용)
- [네트워크 기초 개념](https://www.cloudflare.com/learning/network-layer/what-is-a-subnet/)

---

**예상 비용**: VPC, 서브넷, 라우팅 테이블 자체는 무료
**다음 Lab**: [Lab 07: NAT Gateway](../lab07-nat-gateway/README.md)
