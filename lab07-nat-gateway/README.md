# Lab 07: NAT Gateway 구성

## 📚 목차
- [학습 목표](#학습-목표)
- [왜 이 Lab이 필요한가?](#왜-이-lab이-필요한가)
- [배경 지식](#배경-지식)
- [실습 단계](#실습-단계)
- [심화 이해](#심화-이해)
- [트러블슈팅](#트러블슈팅)
- [다음 단계](#다음-단계)

---

## 🎯 학습 목표

이 Lab을 완료하면 다음을 할 수 있습니다:
- NAT(Network Address Translation)의 개념과 필요성을 이해합니다
- Private 서브넷에서 인터넷 아웃바운드 접속을 구성할 수 있습니다
- NAT Gateway와 NAT Instance의 차이점을 이해합니다
- 보안을 유지하면서 외부 연결이 필요한 아키텍처를 설계합니다

**소요 시간**: 15-20분
**난이도**: 중급
**선행 조건**: Lab 06 (VPC/서브넷) 완료

---

## 🤔 왜 이 Lab이 필요한가?

### Private 서브넷의 딜레마

```
┌──────────────────────────────────────────────────┐
│                     VPC                          │
│                                                  │
│  ┌─────────────────────────────────────────┐    │
│  │     Private Subnet (10.0.2.0/24)        │    │
│  │                                         │    │
│  │  ┌─────────────┐                        │    │
│  │  │   서버      │                        │    │
│  │  │             │                        │    │
│  │  │ apt update? │ ──────────→ 불가     │    │
│  │  │ pip install?│ ──────────→ 불가     │    │
│  │  │ curl api?   │ ──────────→ 불가     │    │
│  │  └─────────────┘                        │    │
│  └─────────────────────────────────────────┘    │
│                                                  │
│  인터넷 게이트웨이 연결 없음 → 인터넷 접속 불가    │
└──────────────────────────────────────────────────┘
```

### 실무에서 Private 서브넷이 인터넷에 접속해야 하는 경우

**1. 패키지 업데이트 및 설치**
```bash
# 보안 패치 적용
sudo apt update && sudo apt upgrade

# 애플리케이션 의존성 설치
pip install fastapi uvicorn sqlalchemy
```

**2. 외부 API 호출**
```python
# 결제 게이트웨이 연동
response = requests.post('https://payment-api.example.com/charge')

# 외부 서비스 연동
data = requests.get('https://api.openweathermap.org/weather')
```

**3. 컨테이너 이미지 다운로드**
```bash
# Docker Hub에서 이미지 pull
docker pull python:3.11-slim
docker pull postgres:15
```

**4. 모니터링 데이터 전송**
```bash
# 클라우드 모니터링 에이전트가 메트릭 전송
# 로그 수집기가 외부 SIEM으로 전송
```

### NAT Gateway의 역할

```
                    인터넷
                       │
                       ↓
┌──────────────────────────────────────────────────┐
│                     VPC                          │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │  Public Subnet                             │ │
│  │  ┌──────────────────────────────────────┐  │ │
│  │  │         NAT Gateway                  │  │ │
│  │  │   공인 IP: 203.0.113.10              │  │ │
│  │  │   모든 아웃바운드 트래픽 중계         │  │ │
│  │  └──────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────┘ │
│                       ↑                          │
│                       │ 아웃바운드만 허용         │
│                       ↓                          │
│  ┌────────────────────────────────────────────┐ │
│  │  Private Subnet                            │ │
│  │  ┌──────────────┐  ┌──────────────┐       │ │
│  │  │   Web 서버   │  │   App 서버   │       │ │
│  │  │  10.0.2.10   │  │  10.0.2.20   │       │ │
│  │  └──────────────┘  └──────────────┘       │ │
│  │                                            │ │
│  │  apt update (가능)                      │ │
│  │  pip install (가능)                     │ │
│  │  외부 API 호출 (가능)                   │ │
│  │  외부에서 직접 접근 (불가 = 보안)        │ │
│  └────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────┘
```

---

## 📖 배경 지식

### 1. NAT(Network Address Translation)란?

NAT는 **사설 IP 주소를 공인 IP 주소로 변환**하는 기술입니다.

```
┌─────────────────────────────────────────────────────────┐
│                    NAT 동작 원리                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [사설 네트워크]                    [인터넷]            │
│                                                         │
│   10.0.2.10 ──┐                                        │
│               │                                        │
│   10.0.2.20 ──┼──→ [NAT] ──→ 203.0.113.10 ──→ 인터넷  │
│               │     장치      (공인 IP)                │
│   10.0.2.30 ──┘                                        │
│                                                         │
│  여러 사설 IP가 하나의 공인 IP를 공유                    │
└─────────────────────────────────────────────────────────┘
```

#### NAT의 종류

**1. SNAT (Source NAT)**
```
출발지 IP 변환 - 내부 → 외부 통신에 사용

요청: 10.0.2.10:45678 → 8.8.8.8:53
      │
      ↓ NAT 변환

요청: 203.0.113.10:12345 → 8.8.8.8:53
      │
      ↓ 응답

응답: 8.8.8.8:53 → 203.0.113.10:12345
      │
      ↓ NAT 역변환

응답: 8.8.8.8:53 → 10.0.2.10:45678
```

**2. DNAT (Destination NAT)**
```
목적지 IP 변환 - 외부 → 내부 통신에 사용 (포트 포워딩)

요청: 인터넷 → 203.0.113.10:80
      │
      ↓ NAT 변환

요청: 인터넷 → 10.0.2.10:8000 (내부 웹 서버)
```

**3. PAT (Port Address Translation) / NAPT**
```
포트 번호를 사용하여 여러 연결 구분

10.0.2.10:45678 → 203.0.113.10:12345 → 인터넷
10.0.2.20:45679 → 203.0.113.10:12346 → 인터넷
10.0.2.30:45680 → 203.0.113.10:12347 → 인터넷

NAT Gateway는 PAT를 사용하여 수천 개의 동시 연결 처리
```

### 2. NAT Gateway vs NAT Instance

| 항목 | NAT Gateway (관리형) | NAT Instance (EC2) |
|------|---------------------|-------------------|
| **관리** | 완전 관리형 서비스 | 직접 관리 필요 |
| **가용성** | 자동 고가용성 | 직접 HA 구성 필요 |
| **대역폭** | 최대 45 Gbps | 인스턴스 유형에 따름 |
| **유지보수** | 자동 패치 | 직접 패치 필요 |
| **비용** | 시간당 + 데이터 처리량 | 인스턴스 비용만 |
| **보안 그룹** | 사용 불가 | 사용 가능 |
| **권장** | 프로덕션 환경 | 테스트/학습 환경 |

### 3. NAT Gateway 아키텍처

```
┌───────────────────────────────────────────────────────────┐
│                        VPC                                │
│                                                           │
│   ┌─────────────────────────────────────────────────┐    │
│   │            Public Subnet (10.0.1.0/24)          │    │
│   │                                                 │    │
│   │    ┌──────────────────┐                        │    │
│   │    │   NAT Gateway    │                        │    │
│   │    │                  │                        │    │
│   │    │  EIP: 203.0.113.10                       │    │
│   │    │  Private: 10.0.1.50                      │    │
│   │    └────────┬─────────┘                        │    │
│   │             │                                   │    │
│   │    ┌────────┴─────────┐                        │    │
│   │    │ Internet Gateway │                        │    │
│   │    └────────┬─────────┘                        │    │
│   └─────────────┼───────────────────────────────────┘    │
│                 │                                         │
│                 ↕ (인터넷)                                │
│                                                           │
│   ┌─────────────────────────────────────────────────┐    │
│   │          Private Subnet (10.0.2.0/24)           │    │
│   │                                                 │    │
│   │   ┌────────────┐    ┌────────────┐             │    │
│   │   │  Server 1  │    │  Server 2  │             │    │
│   │   │ 10.0.2.10  │    │ 10.0.2.20  │             │    │
│   │   └────────────┘    └────────────┘             │    │
│   │                                                 │    │
│   │   라우팅: 0.0.0.0/0 → NAT Gateway               │    │
│   └─────────────────────────────────────────────────┘    │
└───────────────────────────────────────────────────────────┘
```

### 4. NAT Gateway 트래픽 흐름

```
[Private 서버] ─→ [NAT Gateway] ─→ [IGW] ─→ [인터넷]
  10.0.2.10         10.0.1.50      │       8.8.8.8
                    203.0.113.10 ←─┘

상세 흐름:
1. 서버(10.0.2.10)가 인터넷(8.8.8.8)으로 패킷 전송
2. Private 라우팅 테이블에서 0.0.0.0/0 → NAT Gateway 확인
3. NAT Gateway가 출발지 IP를 공인 IP(203.0.113.10)로 변환
4. Internet Gateway를 통해 인터넷으로 전송
5. 응답 패킷이 NAT Gateway로 돌아옴
6. NAT Gateway가 원래 사설 IP(10.0.2.10)로 역변환
7. 서버가 응답 수신
```

### 5. 비용 구조

```
NAT Gateway 비용 = 시간당 비용 + 데이터 처리 비용

시간당 비용 (예시):
- 약 50원/시간
- 월 약 36,000원 (24시간 x 30일)

데이터 처리 비용 (예시):
- 약 45원/GB (처리된 데이터)
- 월 100GB 처리 시 약 4,500원

예상 월 비용 (소규모):
- NAT Gateway: 36,000원
- 데이터 100GB: 4,500원
- 총: 약 40,500원/월
```

---

## 🚀 실습 단계

### 사전 준비

```bash
# 필요 조건
Lab 06 완료 (VPC, 서브넷 생성)
Public 서브넷 존재 (10.0.1.0/24)
Private 서브넷 존재 (10.0.2.0/24)
인터넷 게이트웨이 연결됨
```

### 1단계: 현재 네트워크 상태 확인

#### Private 서브넷 서버에서 인터넷 테스트

```bash
# Private 서브넷에 서버가 있다면 SSH 접속
# (Bastion Host를 통해 접속)

# 인터넷 연결 테스트
curl -I --connect-timeout 5 https://www.google.com

# 예상 결과: 타임아웃 (NAT Gateway 없음)
curl: (28) Connection timed out

# DNS 조회도 실패할 수 있음
nslookup google.com
```

### 2단계: 탄력적 IP(EIP) 생성

NAT Gateway에 할당할 공인 IP를 먼저 생성합니다.

#### 콘솔에서 EIP 생성

1. **EIP 메뉴 이동**
   ```
   콘솔 → 네트워크 → VPC → 탄력적 IP
   ```

2. **탄력적 IP 생성**
   ```
   + 탄력적 IP 생성 버튼 클릭
   ```

3. **정보 입력**
   ```
   이름: shop-nat-eip
   설명: NAT Gateway용 공인 IP
   ```

4. **생성 확인**
   ```
   IP 주소: 203.0.113.10 (예시)
   상태: 할당됨
   ```

### 3단계: NAT Gateway 생성

#### 콘솔에서 NAT Gateway 생성

1. **NAT Gateway 메뉴 이동**
   ```
   콘솔 → 네트워크 → VPC → NAT Gateway
   ```

2. **NAT Gateway 생성**
   ```
   + NAT Gateway 생성 버튼 클릭
   ```

3. **정보 입력**
   ```
   이름: shop-nat-gateway
   VPC: shop-vpc
   서브넷: shop-public-subnet (반드시 Public 서브넷!)
   탄력적 IP: shop-nat-eip (203.0.113.10)
   ```

4. **생성 대기**
   ```
   상태: Creating → Available
   (약 1-2분 소요)
   ```

#### NAT Gateway 위치 중요성

```
중요: NAT Gateway는 반드시 Public 서브넷에 생성!

올바른 구성:
┌─────────────────────────────────────┐
│  Public Subnet (인터넷 접근 가능)    │
│  ├─ NAT Gateway                  │
│  └─ 라우팅: 0.0.0.0/0 → IGW        │
└─────────────────────────────────────┘

잘못된 구성:
┌─────────────────────────────────────┐
│  Private Subnet (인터넷 접근 불가)   │
│  ├─ NAT Gateway (작동 안 함)     │
│  └─ 라우팅: IGW 없음                │
└─────────────────────────────────────┘
```

### 4단계: 라우팅 테이블 설정

#### Private 라우팅 테이블 수정

1. **라우팅 테이블 메뉴 이동**
   ```
   콘솔 → 네트워크 → VPC → 라우팅 테이블
   ```

2. **Private 라우팅 테이블 선택**
   ```
   shop-private-rt 선택
   ```

3. **라우팅 규칙 추가**
   ```
   편집 → 라우팅 추가

   목적지: 0.0.0.0/0
   대상: shop-nat-gateway
   ```

4. **최종 라우팅 테이블**
   ```
   ┌──────────────────────────────────────────────┐
   │  라우팅 테이블: shop-private-rt              │
   ├─────────────────┬────────────────────────────┤
   │   목적지        │   대상                     │
   ├─────────────────┼────────────────────────────┤
   │   10.0.0.0/16   │   Local                   │
   │   0.0.0.0/0     │   shop-nat-gateway ← 추가 │
   └─────────────────┴────────────────────────────┘
   ```

#### 서브넷 연결 확인

```
shop-private-rt 연결된 서브넷:
- shop-private-subnet (10.0.2.0/24) 
- shop-db-subnet (10.0.3.0/24) 
```

### 5단계: 연결 테스트

#### Private 서브넷 서버에서 테스트

```bash
# Bastion Host를 통해 Private 서버에 접속
ssh -i ~/.ssh/gabia-key.pem -J ubuntu@[bastion-ip] ubuntu@10.0.2.10

# 또는 Bastion에서 다시 SSH
ssh -i ~/.ssh/gabia-key.pem ubuntu@10.0.2.10
```

#### 인터넷 연결 테스트

```bash
# 1. 기본 연결 테스트
curl -I https://www.google.com

# 예상 결과
HTTP/2 200
content-type: text/html; charset=ISO-8859-1
...

# 2. DNS 확인
nslookup google.com

# 예상 결과
Server:         127.0.0.53
Address:        127.0.0.53#53

Non-authoritative answer:
Name:   google.com
Address: 142.250.196.110

# 3. 패키지 업데이트 테스트
sudo apt update

# 예상 결과
Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Get:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [119 kB]
...
```

#### 외부에서 확인되는 IP 테스트

```bash
# NAT Gateway의 공인 IP로 나가는지 확인
curl ifconfig.me

# 예상 결과: NAT Gateway의 EIP
203.0.113.10
```

### 6단계: 쇼핑몰 애플리케이션 설정 (선택)

Private 서브넷에서 외부 의존성을 설치합니다.

```bash
# Python 패키지 설치
pip install fastapi uvicorn sqlalchemy psycopg2-binary

# Docker 이미지 다운로드 (Lab 11 연계)
docker pull python:3.11-slim
docker pull postgres:15

# 외부 API 연동 테스트
python3 << 'EOF'
import urllib.request
response = urllib.request.urlopen('https://api.github.com')
print(f"Status: {response.status}")
print(f"GitHub API 연동 성공!")
EOF
```

---

## 🔍 심화 이해

### 1. NAT Gateway 고가용성

#### 단일 AZ 구성 (기본)

```
┌────────────────────────────────────────────────────┐
│                      VPC                           │
│                                                    │
│   ┌─────────────────────────────────────────────┐ │
│   │              Zone A                          │ │
│   │   ┌─────────────────────────────────────┐   │ │
│   │   │        Public Subnet A              │   │ │
│   │   │   ┌────────────────────┐            │   │ │
│   │   │   │   NAT Gateway A    │            │   │ │
│   │   │   └────────────────────┘            │   │ │
│   │   └─────────────────────────────────────┘   │ │
│   │                    ↑                         │ │
│   │   ┌─────────────────────────────────────┐   │ │
│   │   │       Private Subnet A              │   │ │
│   │   │   ┌──────────┐  ┌──────────┐       │   │ │
│   │   │   │ Server 1 │  │ Server 2 │       │   │ │
│   │   │   └──────────┘  └──────────┘       │   │ │
│   │   └─────────────────────────────────────┘   │ │
│   └─────────────────────────────────────────────┘ │
│                                                    │
│   Zone A 장애 시 → 모든 인터넷 연결 중단        │
└────────────────────────────────────────────────────┘
```

#### 멀티 AZ 구성 (권장)

```
┌──────────────────────────────────────────────────────────────┐
│                           VPC                                │
│                                                              │
│   ┌─────────────────────────┐  ┌─────────────────────────┐  │
│   │        Zone A           │  │        Zone B           │  │
│   │                         │  │                         │  │
│   │  ┌───────────────────┐  │  │  ┌───────────────────┐  │  │
│   │  │  Public Subnet A  │  │  │  │  Public Subnet B  │  │  │
│   │  │ ┌───────────────┐ │  │  │  │ ┌───────────────┐ │  │  │
│   │  │ │ NAT Gateway A │ │  │  │  │ │ NAT Gateway B │ │  │  │
│   │  │ └───────────────┘ │  │  │  │ └───────────────┘ │  │  │
│   │  └───────────────────┘  │  │  └───────────────────┘  │  │
│   │           ↑              │  │           ↑              │  │
│   │  ┌───────────────────┐  │  │  ┌───────────────────┐  │  │
│   │  │ Private Subnet A  │  │  │  │ Private Subnet B  │  │  │
│   │  │ ┌──────────────┐  │  │  │  │ ┌──────────────┐  │  │  │
│   │  │ │   Server 1   │  │  │  │  │ │   Server 2   │  │  │  │
│   │  │ └──────────────┘  │  │  │  │ └──────────────┘  │  │  │
│   │  └───────────────────┘  │  │  └───────────────────┘  │  │
│   └─────────────────────────┘  └─────────────────────────┘  │
│                                                              │
│   Zone A 장애 시 → Zone B에서 계속 서비스                  │
└──────────────────────────────────────────────────────────────┘
```

#### 멀티 AZ 라우팅 테이블 설정

```
Private Subnet A 라우팅 테이블:
┌─────────────────┬────────────────────────┐
│   목적지        │   대상                 │
├─────────────────┼────────────────────────┤
│   10.0.0.0/16   │   Local               │
│   0.0.0.0/0     │   NAT Gateway A    │
└─────────────────┴────────────────────────┘

Private Subnet B 라우팅 테이블:
┌─────────────────┬────────────────────────┐
│   목적지        │   대상                 │
├─────────────────┼────────────────────────┤
│   10.0.0.0/16   │   Local               │
│   0.0.0.0/0     │   NAT Gateway B    │
└─────────────────┴────────────────────────┘
```

### 2. NAT Gateway vs Internet Gateway

```
┌───────────────────────────────────────────────────────────────┐
│                        비교                                   │
├───────────────────────────────┬───────────────────────────────┤
│      Internet Gateway         │       NAT Gateway             │
├───────────────────────────────┼───────────────────────────────┤
│  양방향 통신 허용              │  아웃바운드만 허용             │
│  공인 IP가 있는 리소스 필요     │  사설 IP만으로 사용 가능       │
│  외부에서 접근 가능            │  외부에서 접근 불가            │
│  무료                         │  유료                          │
│  Public 서브넷용              │  Private 서브넷용              │
├───────────────────────────────┴───────────────────────────────┤
│                        사용 시나리오                           │
├───────────────────────────────┬───────────────────────────────┤
│  - 웹 서버                    │  - 애플리케이션 서버           │
│  - Bastion Host              │  - 데이터베이스 서버           │
│  - 로드밸런서                 │  - 내부 마이크로서비스         │
└───────────────────────────────┴───────────────────────────────┘
```

### 3. 비용 최적화 전략

#### NAT Gateway 비용 절감 방법

**1. VPC 엔드포인트 사용**
```
NAT Gateway 경유 (비용 발생):
Private Server → NAT Gateway → Internet → S3

VPC 엔드포인트 사용 (절감):
Private Server → VPC Endpoint → S3
```

**2. 리전 내 트래픽 최소화**
```bash
# 같은 리전의 서비스 사용
apt 미러를 리전 내 미러로 설정
Docker 레지스트리를 가비아 레지스트리 사용 (Lab 11)
```

**3. 캐싱 활용**
```bash
# 패키지 캐시 서버 구축
# Proxy 서버 사용
# CDN 활용
```

**4. 스케줄링**
```
개발 환경:
- 업무 시간 외 NAT Gateway 삭제
- 필요 시 재생성 (자동화)
```

### 4. 보안 모범 사례

#### NAT Gateway 보안

```
1. NAT Gateway 자체 보안
   - 보안 그룹 적용 불가 (관리형 서비스)
   - NACL로 서브넷 레벨 제어

2. Private 서브넷 보안
   - 보안 그룹으로 아웃바운드 제한
   - 필요한 목적지만 허용

3. 모니터링
   - VPC Flow Logs 활성화
   - CloudWatch 메트릭 모니터링
```

#### 아웃바운드 트래픽 제어

```
보안 그룹 아웃바운드 규칙:

┌────────────────────────────────────────────────────┐
│  보안 그룹: shop-app-sg (애플리케이션 서버)        │
├────────────────────────────────────────────────────┤
│  아웃바운드 규칙                                   │
├─────────────┬─────────┬────────────────────────────┤
│   타입      │  포트   │   목적지                   │
├─────────────┼─────────┼────────────────────────────┤
│   HTTPS     │  443    │   0.0.0.0/0 (외부 API)    │
│   HTTP      │  80     │   0.0.0.0/0 (apt 등)      │
│   DNS       │  53     │   0.0.0.0/0               │
│   PostgreSQL│  5432   │   10.0.3.0/24 (DB 서브넷) │
└─────────────┴─────────┴────────────────────────────┘
```

---

## 🔧 트러블슈팅

### 문제 1: NAT Gateway 생성 실패

**증상**
```
오류: 서브넷에 인터넷 게이트웨이 라우팅이 없습니다.
```

**원인**
- NAT Gateway를 Private 서브넷에 생성하려고 함

**해결**
```
NAT Gateway는 반드시 Public 서브넷에 생성해야 함

Public 서브넷 조건:
1. 라우팅 테이블에 0.0.0.0/0 → IGW 규칙 존재
2. 인터넷 게이트웨이가 VPC에 연결됨
```

### 문제 2: NAT Gateway 생성 후에도 인터넷 연결 안 됨

**증상**
```bash
curl https://www.google.com
# 타임아웃
```

**확인 순서**

1. **NAT Gateway 상태 확인**
   ```
   콘솔 → NAT Gateway → 상태가 Available인지 확인
   Creating 상태면 대기 (1-2분)
   ```

2. **라우팅 테이블 확인**
   ```
   Private 라우팅 테이블에 0.0.0.0/0 → NAT Gateway 규칙 있는지
   ```

3. **서브넷 연결 확인**
   ```
   Private 서브넷이 Private 라우팅 테이블에 연결되어 있는지
   ```

4. **보안 그룹 아웃바운드 규칙**
   ```
   아웃바운드에서 0.0.0.0/0 허용되어 있는지
   ```

5. **NAT Gateway 서브넷 확인**
   ```
   NAT Gateway가 Public 서브넷에 있는지
   Public 서브넷이 IGW로 라우팅되어 있는지
   ```

### 문제 3: 간헐적인 연결 실패

**증상**
```bash
# 때때로 성공, 때때로 실패
curl https://api.example.com
# 가끔 타임아웃
```

**가능한 원인 및 해결**

1. **NAT Gateway 대역폭 초과**
   ```
   NAT Gateway 메트릭 확인
   ConnectionEstablishedCount 확인
   필요 시 멀티 AZ 구성으로 부하 분산
   ```

2. **포트 고갈**
   ```
   동시 연결이 많은 경우 포트 고갈 가능
   추가 NAT Gateway로 해결
   ```

### 문제 4: 특정 사이트만 접속 안 됨

**증상**
```bash
curl https://www.google.com  # 성공
curl https://special-api.com  # 실패
```

**원인 및 해결**

1. **보안 그룹 확인**
   ```
   특정 포트/IP가 차단되어 있는지 확인
   ```

2. **NACL 확인**
   ```
   서브넷 NACL에서 특정 IP 차단 여부 확인
   ```

3. **DNS 문제**
   ```bash
   # DNS 조회 테스트
   nslookup special-api.com

   # 직접 IP로 테스트
   curl https://1.2.3.4
   ```

### 문제 5: NAT Gateway 삭제 안 됨

**증상**
```
오류: NAT Gateway를 삭제할 수 없습니다.
```

**해결**
```
1. 라우팅 테이블에서 NAT Gateway 참조 제거
2. 연결된 탄력적 IP 확인
3. 잠시 대기 후 다시 시도
```

---

## 📚 다음 단계

### Lab 08: 공인 IP (EIP)
탄력적 IP의 관리 방법과 활용 방법을 학습합니다.

### Lab 09: 보안 그룹
보안 그룹을 설정하여 인스턴스 레벨에서 트래픽을 제어합니다.

### Lab 10: VPC Peering
서로 다른 VPC 간의 연결을 구성합니다.

### 실습 완료 체크리스트

```
NAT Gateway 개념 이해
탄력적 IP(EIP) 생성
NAT Gateway 생성 (Public 서브넷에)
Private 라우팅 테이블 수정 (0.0.0.0/0 → NAT Gateway)
Private 서브넷에서 인터넷 연결 테스트
패키지 설치 테스트 (apt update, pip install)
외부 API 연동 테스트
```

---

## 📖 참고 자료

### 가비아 클라우드 공식 문서
- [NAT Gateway 개요](https://customer.gabia.com/manual/cloud/22632)
- [탄력적 IP 가이드](https://customer.gabia.com/manual/cloud/21025)
- [라우팅 테이블 설정](https://customer.gabia.com/manual/cloud/22632)

### 추가 학습 자료
- [NAT 개념 설명](https://www.cloudflare.com/learning/network-layer/what-is-nat/)

---

**예상 비용**: NAT Gateway 시간당 약 50원 + 데이터 처리 비용
**다음 Lab**: [Lab 08: 공인 IP](../lab08-public-ip/README.md)
